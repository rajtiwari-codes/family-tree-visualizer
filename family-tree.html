<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Family Tree</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);overflow:hidden;height:100vh}
.toolbar{background:rgba(255,255,255,0.95);padding:15px 20px;box-shadow:0 2px 10px rgba(0,0,0,0.1);display:flex;gap:10px;align-items:center;flex-wrap:wrap;z-index:1000}
.toolbar h1{font-size:24px;color:#667eea;margin-right:20px}
.btn{padding:8px 16px;border:none;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;transition:all 0.3s}
.btn-primary{background:#667eea;color:white}
.btn-primary:hover{background:#5568d3;transform:translateY(-2px)}
.btn-secondary{background:#48bb78;color:white}
.btn-secondary:hover{background:#38a169}
.btn-danger{background:#f56565;color:white}
.btn-danger:hover{background:#e53e3e}
.search-box{padding:8px 12px;border:2px solid #e2e8f0;border-radius:6px;font-size:14px;width:200px}
.search-box:focus{outline:none;border-color:#667eea}
.zoom-controls{margin-left:auto;display:flex;gap:5px}
.stats-bar{background:rgba(255,255,255,0.9);padding:8px 20px;display:flex;gap:20px;font-size:13px;color:#4a5568;box-shadow:0 1px 3px rgba(0,0,0,0.1)}
.stat-item{display:flex;align-items:center;gap:5px;font-weight:500}
.canvas-container{width:100%;height:calc(100vh - 120px);overflow:hidden;position:relative;cursor:grab}
.canvas-container:active{cursor:grabbing}
.tree-canvas{position:absolute;transform-origin:0 0;transition:transform 0.1s ease-out}
.person-card{background:white;border-radius:50%;padding:10px;width:150px;height:150px;box-shadow:0 4px 15px rgba(0,0,0,0.15);position:absolute;transition:all 0.3s;border:4px solid;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer}
.person-card:hover{box-shadow:0 8px 25px rgba(0,0,0,0.25);transform:translateY(-3px);z-index:100}
.person-card.male{border-color:#4299e1}
.person-card.female{border-color:#ed64a6}
.person-card.living{background:linear-gradient(135deg,#ffffff 0%,#f0fff4 100%)}
.person-card.deceased{background:linear-gradient(135deg,#ffffff 0%,#faf5ff 100%)}
.card-header{display:flex;gap:15px;margin-bottom:12px;align-items:center}
.avatar-container{position:relative;width:70px;height:70px}
.avatar{width:70px;height:70px;border-radius:50%;object-fit:cover;border:3px solid #e2e8f0}
.avatar-placeholder{width:70px;height:70px;border-radius:50%;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);display:flex;align-items:center;justify-content:center;color:white;font-size:28px;font-weight:bold;border:3px solid #e2e8f0}
.upload-btn{position:absolute;bottom:-5px;right:-5px;background:#667eea;color:white;border:none;border-radius:50%;width:28px;height:28px;cursor:pointer;font-size:16px;z-index:10}
.card-info{flex:1}
.editable{border:1px solid transparent;padding:4px 8px;border-radius:4px;transition:all 0.2s;cursor:text;display:block;width:100%;font-family:inherit}
.editable:hover{background:#f7fafc;border-color:#e2e8f0}
.editable:focus{outline:none;background:white;border-color:#667eea;box-shadow:0 0 0 3px rgba(102,126,234,0.1)}
.name-input{font-size:18px;font-weight:bold;color:#2d3748;margin-bottom:4px}
.date-input{font-size:13px;color:#718096;margin-bottom:2px}
.gender-select{padding:4px 8px;border:1px solid #e2e8f0;border-radius:4px;font-size:13px;cursor:pointer;margin-top:4px}
.age-display{font-size:11px;color:#805ad5;font-weight:600;margin-top:4px;padding:2px 6px;background:#e9d8fd;border-radius:4px;display:inline-block}
.notes-section{margin-top:10px;padding-top:10px;border-top:1px solid #e2e8f0}
.notes-input{font-size:12px;color:#4a5568;min-height:40px;resize:vertical}
.relationship-label{position:absolute;background:#667eea;color:white;padding:3px 8px;border-radius:4px;font-size:11px;font-weight:600;white-space:nowrap;z-index:10;cursor:text;border:1px solid transparent}
.relationship-label:hover{background:#5568d3;border-color:#fff}
.relationship-label:focus{outline:2px solid #fff}
.card-actions{display:flex;gap:8px;margin-top:12px;padding-top:12px;border-top:1px solid #e2e8f0}
.card-btn{flex:1;padding:8px;border:none;border-radius:6px;cursor:pointer;font-size:13px;font-weight:500;transition:all 0.2s}
.add-child-btn{background:#48bb78;color:white}
.add-child-btn:hover{background:#38a169;transform:scale(1.05)}
.delete-btn{background:#f56565;color:white}
.delete-btn:hover{background:#e53e3e;transform:scale(1.05)}
.add-card-below{position:absolute;bottom:-50px;left:50%;transform:translateX(-50%);background:#48bb78;color:white;border:none;border-radius:50%;width:40px;height:40px;font-size:24px;cursor:pointer;box-shadow:0 4px 12px rgba(72,187,120,0.4);transition:all 0.3s;z-index:50}
.add-card-below:hover{background:#38a169;transform:translateX(-50%) scale(1.15);box-shadow:0 6px 20px rgba(72,187,120,0.6)}
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:2000;align-items:center;justify-content:center}
.modal.active{display:flex}
.modal-content{background:white;padding:30px;border-radius:12px;max-width:500px;width:90%;box-shadow:0 20px 60px rgba(0,0,0,0.3)}
.modal-content h2{margin-bottom:20px;color:#2d3748}
.modal-content textarea{width:100%;min-height:200px;padding:12px;border:2px solid #e2e8f0;border-radius:6px;font-family:monospace;font-size:12px;resize:vertical}
.modal-actions{display:flex;gap:10px;margin-top:20px}
input[type="file"]{display:none}
.status-indicator{display:inline-block;width:10px;height:10px;border-radius:50%;margin-left:8px}
.status-living{background:#48bb78;box-shadow:0 0 8px rgba(72,187,120,0.6)}
.status-deceased{background:#a0aec0}
.generation-label{position:absolute;left:10px;background:rgba(102,126,234,0.9);color:white;padding:8px 15px;border-radius:6px;font-size:14px;font-weight:600;box-shadow:0 2px 8px rgba(0,0,0,0.2)}
#connectionsSvg{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:250}
@keyframes flowAnimation{0%{stroke-dashoffset:20}100%{stroke-dashoffset:0}}
.flow-line{stroke-dasharray:5,5;animation:flowAnimation 0.5s linear infinite}
.arrow-marker{opacity:0.9;transition:opacity 0.3s}
.arrow-marker:hover{opacity:1}
.person-card-expanded{background:white;border-radius:12px;padding:15px;width:280px;box-shadow:0 8px 30px rgba(0,0,0,0.3);position:absolute;transition:all 0.3s;border:4px solid;z-index:200}
.close-card-btn{position:absolute;top:5px;right:5px;background:#f56565;color:white;border:none;border-radius:50%;width:25px;height:25px;cursor:pointer;font-size:16px;font-weight:bold;z-index:10}
.close-card-btn:hover{background:#e53e3e;transform:scale(1.1)}
.delete-circle-btn{position:absolute;top:5px;right:5px;background:#f56565;color:white;border:none;border-radius:50%;width:30px;height:30px;cursor:pointer;font-size:14px;z-index:10}
.delete-circle-btn:hover{background:#e53e3e;transform:scale(1.1)}
</style>
</head>
<body>
<div class="toolbar">
<h1>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Family Tree</h1>
<input type="text" class="search-box" id="searchBox" placeholder="ğŸ” Search...">
<select class="search-box" id="layoutSelector" onchange="app.changeLayout(this.value)" style="width:150px">
<option value="compact">ğŸ“ Compact</option>
<option value="normal">ğŸ“ Normal</option>
<option value="wide">ğŸ“ Wide</option>
<option value="extrawide">ğŸ“ Extra Wide</option>
<option value="vertical">ğŸ“ Vertical</option>
</select>
<select class="search-box" id="bgSelector" onchange="app.changeBackground(this.value)" style="width:150px">
<option value="">ğŸ¨ Background</option>
<option value="linear-gradient(135deg, #667eea 0%, #764ba2 100%)">Purple</option>
<option value="linear-gradient(135deg, #f093fb 0%, #f5576c 100%)">Pink</option>
<option value="linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)">Blue</option>
<option value="linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)">Green</option>
<option value="linear-gradient(135deg, #fa709a 0%, #fee140 100%)">Sunset</option>
<option value="linear-gradient(135deg, #30cfd0 0%, #330867 100%)">Ocean</option>
<option value="linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)">Pastel</option>
<option value="#ffffff">White</option>
<option value="#1a202c">Dark</option>
</select>
<button class="btn btn-secondary" onclick="app.exportJSON()">ğŸ“¥ Export</button>
<button class="btn btn-secondary" onclick="app.importJSON()">ğŸ“¤ Import</button>
<button class="btn btn-primary" onclick="app.exportImage()">ğŸ–¼ï¸ Image</button>
<button class="btn btn-primary" onclick="app.showStats()">ğŸ“Š Stats</button>
<button class="btn btn-danger" onclick="app.clearAll()">ğŸ—‘ï¸ Clear</button>
<button class="btn btn-secondary" onclick="app.autoAddSample()">â• Auto Add Sample</button>
<div class="zoom-controls">
<button class="btn btn-primary" onclick="app.zoomIn()">+</button>
<button class="btn btn-primary" onclick="app.zoomOut()">-</button>
<button class="btn btn-primary" onclick="app.resetZoom()">â†º</button>
</div>
</div>
<div class="stats-bar">
<div class="stat-item">ğŸ‘¥ Total: <strong id="totalMembers">0</strong></div>
<div class="stat-item">ğŸ‘¨ Males: <strong id="totalMales">0</strong></div>
<div class="stat-item">ğŸ‘© Females: <strong id="totalFemales">0</strong></div>
<div class="stat-item">ğŸ’š Living: <strong id="totalLiving">0</strong></div>
<div class="stat-item">ğŸ•Šï¸ Deceased: <strong id="totalDeceased">0</strong></div>
<div class="stat-item">ğŸŒ³ Generations: <strong id="totalGenerations">0</strong></div>
</div>
<div class="canvas-container" id="canvasContainer">
<div class="tree-canvas" id="treeCanvas">
<svg id="connectionsSvg"></svg>
<div id="cardsContainer"></div>
</div>
</div>
<div class="modal" id="importModal">
<div class="modal-content">
<h2>ğŸ“¤ Import Data</h2>
<textarea id="importTextarea" placeholder="Paste JSON here..."></textarea>
<div class="modal-actions">
<button class="btn btn-primary" onclick="app.confirmImport()">Import</button>
<button class="btn btn-secondary" onclick="app.closeModal()">Cancel</button>
</div>
</div>
</div>
<div class="modal" id="exportModal">
<div class="modal-content">
<h2>ğŸ“¥ Export Data</h2>
<textarea id="exportTextarea" readonly></textarea>
<div class="modal-actions">
<button class="btn btn-primary" onclick="app.copyToClipboard()">ğŸ“‹ Copy</button>
<button class="btn btn-secondary" onclick="app.downloadJSON()">ğŸ’¾ Download</button>
<button class="btn btn-secondary" onclick="app.closeModal()">Close</button>
</div>
</div>
</div>
<div class="modal" id="statsModal">
<div class="modal-content">
<h2>ğŸ“Š Statistics</h2>
<div id="statsContent"></div>
<div class="modal-actions">
<button class="btn btn-secondary" onclick="app.closeModal()">Close</button>
</div>
</div>
</div>
<script src="app.js"></script>
</body>
</html>
